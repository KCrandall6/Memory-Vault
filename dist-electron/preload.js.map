{"version":3,"file":"preload.js","sources":["../electron/preload.ts"],"sourcesContent":["// electron/preload.ts - cleaned version\r\nconst { contextBridge, ipcRenderer } = require('electron');\r\n\r\n// Define TypeScript interfaces for ElectronAPI\r\ninterface ElectronAPI {\r\n  selectFiles: () => Promise<any[]>;\r\n  saveMedia: (data: any) => Promise<{ success: boolean; mediaId?: number; error?: string }>;\r\n  getFilePreview: (filePath: string) => Promise<{ dataUrl: string; mimeType: string } | null>;\r\n  getMediaTypes: () => Promise<any[]>;\r\n  getCollections: () => Promise<any[]>;\r\n  getTags: () => Promise<any[]>;\r\n  getPeople: () => Promise<any[]>;\r\n  onMainProcessMessage: (callback: (...args: any[]) => void) => void;\r\n}\r\n\r\n// Expose validated APIs to renderer process\r\ncontextBridge.exposeInMainWorld('electronAPI', {\r\n  // File operations\r\n  selectFiles: () => ipcRenderer.invoke('select-files'),\r\n  saveMedia: (data) => ipcRenderer.invoke('save-media', data),\r\n  getFilePreview: (filePath) => ipcRenderer.invoke('get-file-preview', filePath),\r\n  \r\n  // Database operations\r\n  getCollections: () => ipcRenderer.invoke('get-collections'),\r\n  getTags: () => ipcRenderer.invoke('get-tags'),\r\n  getPeople: () => ipcRenderer.invoke('get-people'),\r\n  \r\n  // Event listeners\r\n  onMainProcessMessage: (callback) => {\r\n    ipcRenderer.on('main-process-message', (_event, ...args) => callback(...args));\r\n  }\r\n} as ElectronAPI)"],"names":[],"mappings":"AACA,MAAM,EAAE,eAAe,gBAAgB,QAAQ,UAAU;AAezD,cAAc,kBAAkB,eAAe;AAAA;AAAA,EAE7C,aAAa,MAAM,YAAY,OAAO,cAAc;AAAA,EACpD,WAAW,CAAC,SAAS,YAAY,OAAO,cAAc,IAAI;AAAA,EAC1D,gBAAgB,CAAC,aAAa,YAAY,OAAO,oBAAoB,QAAQ;AAAA;AAAA,EAG7E,gBAAgB,MAAM,YAAY,OAAO,iBAAiB;AAAA,EAC1D,SAAS,MAAM,YAAY,OAAO,UAAU;AAAA,EAC5C,WAAW,MAAM,YAAY,OAAO,YAAY;AAAA;AAAA,EAGhD,sBAAsB,CAAC,aAAa;AACtB,gBAAA,GAAG,wBAAwB,CAAC,WAAW,SAAS,SAAS,GAAG,IAAI,CAAC;AAAA,EAAA;AAEjF,CAAgB;"}